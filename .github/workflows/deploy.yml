name: Deploy

on:
  push:
    branches:
      - master

# on: 
#   workflow_run:
#     workflows: ["Build"]
#     types:
#       - completed

jobs:
  build:
    name: Deploy to Infra Codebase
    runs-on: ubuntu-latest
    permissions:
      contents: 'read'
      id-token: 'write'

    steps:
      - name : Check out repository code
        uses: actions/checkout@v4
        with:
          repository: clo-dso-test/jibaek-infra
          token: ${{ secrets.INFRA_REPO_TOKEN }}
          path: main

      - name: Set short git commit SHA
        id: vars
        run: |
          calculatedSha=$(git rev-parse --short ${{ github.sha }})
          echo "COMMIT_SHORT_SHA=$calculatedSha" >> $GITHUB_ENV

      # - uses: chrisdickinson/setup-yq@latest

      
    
      - name: Finish Image Deploy to Infra Repo
        run: |
          echo "ðŸŽ‰ Finish Image Deploy to Infra Repo!!! ðŸŽ‰"